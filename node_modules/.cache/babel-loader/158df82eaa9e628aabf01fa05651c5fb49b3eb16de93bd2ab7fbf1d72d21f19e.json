{"ast":null,"code":"import{useEffect,useState}from'react';import{supabase}from'./components/supabaseClient';export function useSupabaseUser(){const[user,setUser]=useState(null);useEffect(()=>{const session=supabase.auth.getSession();session.then(_ref=>{var _data$session;let{data}=_ref;return setUser((data===null||data===void 0?void 0:(_data$session=data.session)===null||_data$session===void 0?void 0:_data$session.user)||null);});const{data:listener}=supabase.auth.onAuthStateChange((_event,session)=>{setUser((session===null||session===void 0?void 0:session.user)||null);});return()=>{var _listener$subscriptio;listener===null||listener===void 0?void 0:(_listener$subscriptio=listener.subscription)===null||_listener$subscriptio===void 0?void 0:_listener$subscriptio.unsubscribe();};},[]);return user;}","map":{"version":3,"names":["useEffect","useState","supabase","useSupabaseUser","user","setUser","session","auth","getSession","then","_ref","_data$session","data","listener","onAuthStateChange","_event","_listener$subscriptio","subscription","unsubscribe"],"sources":["D:/diary me test/src/useSupabaseUser.js"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { supabase } from './components/supabaseClient';\r\n\r\nexport function useSupabaseUser() {\r\n  const [user, setUser] = useState(null);\r\n  useEffect(() => {\r\n    const session = supabase.auth.getSession();\r\n    session.then(({ data }) => setUser(data?.session?.user || null));\r\n    const { data: listener } = supabase.auth.onAuthStateChange((_event, session) => {\r\n      setUser(session?.user || null);\r\n    });\r\n    return () => {\r\n      listener?.subscription?.unsubscribe();\r\n    };\r\n  }, []);\r\n  return user;\r\n}\r\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,QAAQ,KAAQ,6BAA6B,CAEtD,MAAO,SAAS,CAAAC,eAAeA,CAAA,CAAG,CAChC,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGJ,QAAQ,CAAC,IAAI,CAAC,CACtCD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAM,OAAO,CAAGJ,QAAQ,CAACK,IAAI,CAACC,UAAU,CAAC,CAAC,CAC1CF,OAAO,CAACG,IAAI,CAACC,IAAA,OAAAC,aAAA,IAAC,CAAEC,IAAK,CAAC,CAAAF,IAAA,OAAK,CAAAL,OAAO,CAAC,CAAAO,IAAI,SAAJA,IAAI,kBAAAD,aAAA,CAAJC,IAAI,CAAEN,OAAO,UAAAK,aAAA,iBAAbA,aAAA,CAAeP,IAAI,GAAI,IAAI,CAAC,GAAC,CAChE,KAAM,CAAEQ,IAAI,CAAEC,QAAS,CAAC,CAAGX,QAAQ,CAACK,IAAI,CAACO,iBAAiB,CAAC,CAACC,MAAM,CAAET,OAAO,GAAK,CAC9ED,OAAO,CAAC,CAAAC,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEF,IAAI,GAAI,IAAI,CAAC,CAChC,CAAC,CAAC,CACF,MAAO,IAAM,KAAAY,qBAAA,CACXH,QAAQ,SAARA,QAAQ,kBAAAG,qBAAA,CAARH,QAAQ,CAAEI,YAAY,UAAAD,qBAAA,iBAAtBA,qBAAA,CAAwBE,WAAW,CAAC,CAAC,CACvC,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CACN,MAAO,CAAAd,IAAI,CACb","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}