{"ast":null,"code":"import React from'react';import ReactDOM from'react-dom/client';import Root from'./Root';import'./index.css';import{jsx as _jsx}from\"react/jsx-runtime\";const root=ReactDOM.createRoot(document.getElementById('root'));root.render(/*#__PURE__*/_jsx(Root,{}));// Register service worker for PWA and subscribe to push notifications\nif('serviceWorker'in navigator){window.addEventListener('load',async()=>{try{const registration=await navigator.serviceWorker.register('/sw.js');console.log('Service Worker registered with scope:',registration.scope);// Request notification permission\nif('Notification'in window&&Notification.permission!=='granted'){await Notification.requestPermission();}// Subscribe to push notifications\nif('PushManager'in window&&Notification.permission==='granted'){const subscribeOptions={userVisibleOnly:true,applicationServerKey:urlBase64ToUint8Array('<YOUR_PUBLIC_VAPID_KEY_HERE>')};const subscription=await registration.pushManager.subscribe(subscribeOptions);console.log('Push subscription:',JSON.stringify(subscription));// TODO: Send subscription to your backend server for later push\n}}catch(err){console.error('Service Worker registration or push subscription failed:',err);}});}// Helper to convert VAPID key\nfunction urlBase64ToUint8Array(base64String){const padding='='.repeat((4-base64String.length%4)%4);const base64=(base64String+padding).replace(/-/g,'+').replace(/_/g,'/');const rawData=window.atob(base64);const outputArray=new Uint8Array(rawData.length);for(let i=0;i<rawData.length;++i){outputArray[i]=rawData.charCodeAt(i);}return outputArray;}","map":{"version":3,"names":["React","ReactDOM","Root","jsx","_jsx","root","createRoot","document","getElementById","render","navigator","window","addEventListener","registration","serviceWorker","register","console","log","scope","Notification","permission","requestPermission","subscribeOptions","userVisibleOnly","applicationServerKey","urlBase64ToUint8Array","subscription","pushManager","subscribe","JSON","stringify","err","error","base64String","padding","repeat","length","base64","replace","rawData","atob","outputArray","Uint8Array","i","charCodeAt"],"sources":["D:/diary me test/src/index.js"],"sourcesContent":["import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport Root from './Root';\r\nimport './index.css';\r\n\r\nconst root = ReactDOM.createRoot(document.getElementById('root'));\r\nroot.render(<Root />);\r\n\r\n// Register service worker for PWA and subscribe to push notifications\r\nif ('serviceWorker' in navigator) {\r\n\twindow.addEventListener('load', async () => {\r\n\t\ttry {\r\n\t\t\tconst registration = await navigator.serviceWorker.register('/sw.js');\r\n\t\t\tconsole.log('Service Worker registered with scope:', registration.scope);\r\n\r\n\t\t\t// Request notification permission\r\n\t\t\tif ('Notification' in window && Notification.permission !== 'granted') {\r\n\t\t\t\tawait Notification.requestPermission();\r\n\t\t\t}\r\n\r\n\t\t\t// Subscribe to push notifications\r\n\t\t\tif ('PushManager' in window && Notification.permission === 'granted') {\r\n\t\t\t\tconst subscribeOptions = {\r\n\t\t\t\t\tuserVisibleOnly: true,\r\n\t\t\t\t\tapplicationServerKey: urlBase64ToUint8Array('<YOUR_PUBLIC_VAPID_KEY_HERE>')\r\n\t\t\t\t};\r\n\t\t\t\tconst subscription = await registration.pushManager.subscribe(subscribeOptions);\r\n\t\t\t\tconsole.log('Push subscription:', JSON.stringify(subscription));\r\n\t\t\t\t// TODO: Send subscription to your backend server for later push\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('Service Worker registration or push subscription failed:', err);\r\n\t\t}\r\n\t});\r\n}\r\n\r\n// Helper to convert VAPID key\r\nfunction urlBase64ToUint8Array(base64String) {\r\n\tconst padding = '='.repeat((4 - base64String.length % 4) % 4);\r\n\tconst base64 = (base64String + padding)\r\n\t\t.replace(/-/g, '+')\r\n\t\t.replace(/_/g, '/');\r\n\tconst rawData = window.atob(base64);\r\n\tconst outputArray = new Uint8Array(rawData.length);\r\n\tfor (let i = 0; i < rawData.length; ++i) {\r\n\t\toutputArray[i] = rawData.charCodeAt(i);\r\n\t}\r\n\treturn outputArray;\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,QAAQ,KAAM,kBAAkB,CACvC,MAAO,CAAAC,IAAI,KAAM,QAAQ,CACzB,MAAO,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAErB,KAAM,CAAAC,IAAI,CAAGJ,QAAQ,CAACK,UAAU,CAACC,QAAQ,CAACC,cAAc,CAAC,MAAM,CAAC,CAAC,CACjEH,IAAI,CAACI,MAAM,cAACL,IAAA,CAACF,IAAI,GAAE,CAAC,CAAC,CAErB;AACA,GAAI,eAAe,EAAI,CAAAQ,SAAS,CAAE,CACjCC,MAAM,CAACC,gBAAgB,CAAC,MAAM,CAAE,SAAY,CAC3C,GAAI,CACH,KAAM,CAAAC,YAAY,CAAG,KAAM,CAAAH,SAAS,CAACI,aAAa,CAACC,QAAQ,CAAC,QAAQ,CAAC,CACrEC,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAEJ,YAAY,CAACK,KAAK,CAAC,CAExE;AACA,GAAI,cAAc,EAAI,CAAAP,MAAM,EAAIQ,YAAY,CAACC,UAAU,GAAK,SAAS,CAAE,CACtE,KAAM,CAAAD,YAAY,CAACE,iBAAiB,CAAC,CAAC,CACvC,CAEA;AACA,GAAI,aAAa,EAAI,CAAAV,MAAM,EAAIQ,YAAY,CAACC,UAAU,GAAK,SAAS,CAAE,CACrE,KAAM,CAAAE,gBAAgB,CAAG,CACxBC,eAAe,CAAE,IAAI,CACrBC,oBAAoB,CAAEC,qBAAqB,CAAC,8BAA8B,CAC3E,CAAC,CACD,KAAM,CAAAC,YAAY,CAAG,KAAM,CAAAb,YAAY,CAACc,WAAW,CAACC,SAAS,CAACN,gBAAgB,CAAC,CAC/EN,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAEY,IAAI,CAACC,SAAS,CAACJ,YAAY,CAAC,CAAC,CAC/D;AACD,CACD,CAAE,MAAOK,GAAG,CAAE,CACbf,OAAO,CAACgB,KAAK,CAAC,0DAA0D,CAAED,GAAG,CAAC,CAC/E,CACD,CAAC,CAAC,CACH,CAEA;AACA,QAAS,CAAAN,qBAAqBA,CAACQ,YAAY,CAAE,CAC5C,KAAM,CAAAC,OAAO,CAAG,GAAG,CAACC,MAAM,CAAC,CAAC,CAAC,CAAGF,YAAY,CAACG,MAAM,CAAG,CAAC,EAAI,CAAC,CAAC,CAC7D,KAAM,CAAAC,MAAM,CAAG,CAACJ,YAAY,CAAGC,OAAO,EACpCI,OAAO,CAAC,IAAI,CAAE,GAAG,CAAC,CAClBA,OAAO,CAAC,IAAI,CAAE,GAAG,CAAC,CACpB,KAAM,CAAAC,OAAO,CAAG5B,MAAM,CAAC6B,IAAI,CAACH,MAAM,CAAC,CACnC,KAAM,CAAAI,WAAW,CAAG,GAAI,CAAAC,UAAU,CAACH,OAAO,CAACH,MAAM,CAAC,CAClD,IAAK,GAAI,CAAAO,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGJ,OAAO,CAACH,MAAM,CAAE,EAAEO,CAAC,CAAE,CACxCF,WAAW,CAACE,CAAC,CAAC,CAAGJ,OAAO,CAACK,UAAU,CAACD,CAAC,CAAC,CACvC,CACA,MAAO,CAAAF,WAAW,CACnB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}