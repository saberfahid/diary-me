{"ast":null,"code":"import ExportButtons from'./ExportButtons';import BuyMeACoffee from'./BuyMeACoffee';import DiaryEditor from'./DiaryEditor';import React from'react';import{useParams,useNavigate,useLocation}from'react-router-dom';import{getDiaryEntries}from'../db';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function EntryPage(){const{id}=useParams();const navigate=useNavigate();const location=useLocation();const[entry,setEntry]=React.useState(null);const[editing,setEditing]=React.useState(false);React.useEffect(()=>{getDiaryEntries().then(entries=>{const found=entries.find(e=>String(e.id)===String(id));setEntry(found||null);});},[id]);React.useEffect(()=>{if(location.search.includes('edit=true')){setEditing(true);}},[location.search]);if(!entry){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-xl p-8 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-700\",children:\"Entry not found.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"mt-4 px-4 py-2 bg-blue-500 text-white rounded-full\",onClick:()=>navigate(-1),children:\"Go Back\"})]})});}if(editing){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-100 via-purple-100 to-pink-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-[3rem] shadow-2xl p-20 max-w-5xl w-full relative border-8 border-blue-300\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"absolute top-10 right-16 text-red-500 font-bold text-4xl hover:text-red-700\",onClick:()=>setEditing(false),children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-5xl font-extrabold mb-8 text-blue-700 text-center\",children:\"Edit Entry\"}),/*#__PURE__*/_jsx(DiaryEditor,{initialEntry:entry,onSave:()=>{setEditing(false);navigate(0);}})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-100 via-purple-100 to-pink-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-[3rem] shadow-2xl p-20 max-w-5xl w-full relative border-8 border-blue-300\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"absolute top-10 right-16 text-red-500 font-bold text-4xl hover:text-red-700\",onClick:()=>navigate(-1),children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-6xl font-extrabold mb-8 text-blue-700 text-center\",children:entry.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 text-2xl text-gray-500 text-center\",children:[entry.date,\" \",entry.mood&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-8 text-4xl\",children:entry.mood})]}),entry.tags&&entry.tags.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-8 text-xl bg-gradient-to-r from-blue-200 via-purple-200 to-pink-200 px-8 py-4 rounded-full text-gray-700 inline-block font-bold text-center\",children:entry.tags.join(', ')}),entry.image&&/*#__PURE__*/_jsx(\"img\",{src:entry.image,alt:\"Diary\",className:\"my-10 max-h-[40rem] rounded-3xl shadow-2xl mx-auto\"}),/*#__PURE__*/_jsx(\"div\",{className:\"prose prose-xl max-w-none bg-white/80 p-12 rounded-3xl border-2 border-gray-300 text-gray-900 text-center\",dangerouslySetInnerHTML:{__html:entry.content}}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center mt-8 gap-4\",children:[/*#__PURE__*/_jsx(ExportButtons,{entry:entry}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-500 text-white px-4 py-2 rounded-full font-bold shadow hover:bg-blue-600 transition-all duration-200\",onClick:()=>{navigator.clipboard.writeText(window.location.href);alert('Entry link copied! You can share it, but only you can view it on this device.');},children:\"Share Entry\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-green-500 text-white px-4 py-2 rounded-full font-bold shadow hover:bg-green-600 transition-all duration-200\",onClick:()=>setEditing(true),children:\"Edit Entry\"}),/*#__PURE__*/_jsx(BuyMeACoffee,{})]})]})});}export default EntryPage;","map":{"version":3,"names":["ExportButtons","BuyMeACoffee","DiaryEditor","React","useParams","useNavigate","useLocation","getDiaryEntries","jsx","_jsx","jsxs","_jsxs","EntryPage","id","navigate","location","entry","setEntry","useState","editing","setEditing","useEffect","then","entries","found","find","e","String","search","includes","className","children","onClick","initialEntry","onSave","title","date","mood","tags","length","join","image","src","alt","dangerouslySetInnerHTML","__html","content","navigator","clipboard","writeText","window","href","alert"],"sources":["D:/diarry me/src/components/EntryPage.js"],"sourcesContent":["import ExportButtons from './ExportButtons';\r\nimport BuyMeACoffee from './BuyMeACoffee';\r\nimport DiaryEditor from './DiaryEditor';\r\nimport React from 'react';\r\nimport { useParams, useNavigate, useLocation } from 'react-router-dom';\r\nimport { getDiaryEntries } from '../db';\r\nfunction EntryPage() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const [entry, setEntry] = React.useState(null);\r\n  const [editing, setEditing] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    getDiaryEntries().then(entries => {\r\n      const found = entries.find(e => String(e.id) === String(id));\r\n      setEntry(found || null);\r\n    });\r\n  }, [id]);\r\n\r\n  React.useEffect(() => {\r\n    if (location.search.includes('edit=true')) {\r\n      setEditing(true);\r\n    }\r\n  }, [location.search]);\r\n\r\n  if (!entry) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"bg-white rounded-xl shadow-xl p-8 text-center\">\r\n          <p className=\"text-lg text-gray-700\">Entry not found.</p>\r\n          <button className=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded-full\" onClick={() => navigate(-1)}>Go Back</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (editing) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-100 via-purple-100 to-pink-100\">\r\n        <div className=\"bg-white rounded-[3rem] shadow-2xl p-20 max-w-5xl w-full relative border-8 border-blue-300\">\r\n          <button\r\n            className=\"absolute top-10 right-16 text-red-500 font-bold text-4xl hover:text-red-700\"\r\n            onClick={() => setEditing(false)}\r\n          >×</button>\r\n          <h2 className=\"text-5xl font-extrabold mb-8 text-blue-700 text-center\">Edit Entry</h2>\r\n          <DiaryEditor\r\n            initialEntry={entry}\r\n            onSave={() => { setEditing(false); navigate(0); }}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-100 via-purple-100 to-pink-100\">\r\n      <div className=\"bg-white rounded-[3rem] shadow-2xl p-20 max-w-5xl w-full relative border-8 border-blue-300\">\r\n        <button\r\n          className=\"absolute top-10 right-16 text-red-500 font-bold text-4xl hover:text-red-700\"\r\n          onClick={() => navigate(-1)}\r\n        >×</button>\r\n        <h2 className=\"text-6xl font-extrabold mb-8 text-blue-700 text-center\">{entry.title}</h2>\r\n        <div className=\"mb-8 text-2xl text-gray-500 text-center\">{entry.date} {entry.mood && <span className=\"ml-8 text-4xl\">{entry.mood}</span>}</div>\r\n        {entry.tags && entry.tags.length > 0 && (\r\n          <div className=\"mb-8 text-xl bg-gradient-to-r from-blue-200 via-purple-200 to-pink-200 px-8 py-4 rounded-full text-gray-700 inline-block font-bold text-center\">{entry.tags.join(', ')}</div>\r\n        )}\r\n        {entry.image && <img src={entry.image} alt=\"Diary\" className=\"my-10 max-h-[40rem] rounded-3xl shadow-2xl mx-auto\" />}\r\n        <div className=\"prose prose-xl max-w-none bg-white/80 p-12 rounded-3xl border-2 border-gray-300 text-gray-900 text-center\" dangerouslySetInnerHTML={{ __html: entry.content }} />\r\n        <div className=\"flex flex-col items-center mt-8 gap-4\">\r\n          <ExportButtons entry={entry} />\r\n          <button\r\n            className=\"bg-blue-500 text-white px-4 py-2 rounded-full font-bold shadow hover:bg-blue-600 transition-all duration-200\"\r\n            onClick={() => {\r\n              navigator.clipboard.writeText(window.location.href);\r\n              alert('Entry link copied! You can share it, but only you can view it on this device.');\r\n            }}\r\n          >\r\n            Share Entry\r\n          </button>\r\n          <button\r\n            className=\"bg-green-500 text-white px-4 py-2 rounded-full font-bold shadow hover:bg-green-600 transition-all duration-200\"\r\n            onClick={() => setEditing(true)}\r\n          >\r\n            Edit Entry\r\n          </button>\r\n          <BuyMeACoffee />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EntryPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}